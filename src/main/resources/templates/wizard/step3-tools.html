{#include wizard/layout.html}

{#wizardContent}
<div x-show="currentStep === 3">
    <div class="mb-6">
        <h2 class="text-2xl font-bold text-gray-900 mb-2">Select Tools</h2>
        <p class="text-gray-600">Choose which tools and integrations your agent can use.</p>
    </div>

    <form class="space-y-6">
        <!-- Tools List -->
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-3">
                Available Tools <span class="text-gray-400">(Optional)</span>
            </label>
            
            <div class="space-y-3">
                {#if tools.isEmpty()}
                <div class="text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                    </svg>
                    <h3 class="mt-2 text-sm font-medium text-gray-900">No tools available</h3>
                    <p class="mt-1 text-sm text-gray-500">Create tools first to enable your agent to interact with external systems.</p>
                    <div class="mt-6">
                        <a 
                            href="/tools/create" 
                            class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 transition-colors"
                        >
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                            </svg>
                            Create Tool
                        </a>
                    </div>
                </div>
                {#else}
                {#for tool in tools}
                <label class="flex items-start p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors">
                    <input 
                        type="checkbox" 
                        :value="'{tool.id}'"
                        x-model="formData.toolIds"
                        class="mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                    />
                    <div class="ml-3 flex-1">
                        <div class="flex items-center justify-between">
                            <span class="text-sm font-medium text-gray-900">{tool.name}</span>
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                {tool.type}
                            </span>
                        </div>
                        {#if tool.description}
                        <p class="mt-1 text-sm text-gray-600">{tool.description}</p>
                        {/if}
                        <p class="mt-1 text-xs text-gray-500">{tool.endpoint}</p>
                    </div>
                </label>
                {/for}
                {/if}
            </div>
        </div>

        <!-- Info Section -->
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <h3 class="text-sm font-semibold text-blue-900 mb-2 flex items-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                About Tools
            </h3>
            <p class="text-sm text-blue-800">
                Tools allow your agent to interact with external systems and APIs. You can add or remove tools later from the agent settings. 
                If you don't have any tools yet, you can skip this step and create them later.
            </p>
        </div>
    </form>
</div>
{/wizardContent}

{/include}
